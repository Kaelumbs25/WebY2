async function fetchUser(){try{const t=await fetch("/products.json");renderPage((await t.json()).books)}catch(t){console.error("Failed to fetch products data:",t),document.getElementById("products-container").innerHTML="<p>Failed to load data. Please try again later.</p>"}}function renderPage(t){const e=document.getElementById("products-container");e.innerHTML="",console.log(t),Object.keys(localStorage).forEach((n=>{Number(n);if("cart"!==n&&"loggedIn"!==n&&"0"!==localStorage.getItem(n)){const a=t[n],{name:o,img:c,author:l,release:r,format:s,price:d,id:i}=a;console.log(a);const u=document.createElement("div");u.setAttribute("class","row productCard text-secondary"),u.innerHTML=`\n          <div class="col-6">\n          <img src="${c}" alt="Image of ${o}">\n          </div>\n          <div class="col-6">\n          <h3>${o}</h3>\n          <p>${l}</p>\n          <p>${r}</p>\n          <p>${s}</p>\n          <p>${d}</p>\n          <p>Quantity: </p>         \n          <label for="quantity">Quantity:</label>\n          <input type="number" class="counter" id="quantity" name="quantity" min="0" value="${localStorage.getItem(`${n}`)}">\n          <button type="button" id="${n}" class="btn btn-success">Set</button>\n          </div>\n          \n        `,e.appendChild(u),u.classList.add("gy-4"),document.getElementById(n).addEventListener("click",(()=>{let e=0;const a=document.querySelectorAll(".counter");for(let t=0;t<a.length;t++)e+=Number(a[t].value);localStorage.setItem("cart",e),localStorage.setItem(n,document.getElementById("quantity").value),document.getElementById("cartBadge").innerHTML=localStorage.getItem("cart"),calcCost(t)}))}})),calcCost(t)}function calcCost(t){let e=0;Object.keys(localStorage).forEach((n=>{if("cart"!==n&&"loggedIn"!==n){const a=t[n],{name:o,img:c,author:l,release:r,format:s,price:d,id:i}=a;e+=a.price*Number(localStorage.getItem(n))}})),e=e.toFixed(2),document.getElementById("totalCost").innerHTML=`â‚¬${e}`}fetchUser();